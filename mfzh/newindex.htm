<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>大凤林-立直麻将赛事管理平台</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lietxia/mahjong_pub_src@1.0.13/mfzh/css/main.css" />

    <style>
        body {
            margin-top: 0;
            background: url('https://cdn.jsdelivr.net/gh/lietxia/mahjong_pub_src/mfzh/img/beautiful-blur-bokeh-259707.jpg');
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: center;
            margin-bottom: 0;
        }

        #my_banner {
            text-shadow: 0 1px 5px rgba(0, 0, 0, 0.7)
        }

        .index_frendlylink {
            border-radius: 1em;
            width: 150px;
            height: 60px;
            margin: 2px 5px;
        }

        .index_list a {
            display: inline-block;
            text-decoration: none;
            color: #fff;
            background-color: #8484a4;
            padding: 2px 12px;
            border-radius: 1em;
            margin: 4px 8px;
        }

        .index_card {
            color: #000;
            display: inline-block;
            padding: 2px;
            margin: 5px;
        }

        .index_card:hover {
            border-radius: 1em;
            background-color: #8484a4;
            color: #000;
        }

        .index_card div {
            color: #fff;
            background-color: #313155;
            border-radius: 8px;
            padding: 2px 4px;
        }

        .index_card img {
            width: 100px;
            height: 100px;
            border-radius: 1em;
        }

        .index_list a:hover {
            color: #fff;
            background-color: #000000;
        }

        @media (min-width: 768px) {
            .carousel-inner {
                background-color: rgba(0, 0, 0, 0.5)
            }

            .carousel-inner img {
                max-width: 1000px;
                margin: 0 auto !important;
            }
        }
    </style>
</head>

<body>
    <nav id='my_nav' class="navbar navbar-expand-sm navbar-dark fixed-top">
        <a class="navbar-brand" href="./">大鳳林</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse rounded-lg" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" target="_blank" href="https://wiki.mahjong.pub/#!newcs.md">申請比賽</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" target="_blank" href="http://wiki.lingshangkaihua.com/">麻雀百科</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" target="_blank" href="../fenzu.html">分組工具</a>
                </li>

            </ul>
        </div>
    </nav>

    <div class="bd-example" id="my_banner">
        <div id="carouselExampleCaptions" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
                <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
                <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
                <li data-target="#carouselExampleCaptions" data-slide-to="2"></li>
            </ol>

            <div class="carousel-inner">
                <div class="carousel-item active">
                    <a href="./" target="_blank"><img
                            src="https://cdn.jsdelivr.net/gh/lietxia/mahjong_pub_src/mfzh/img/banner002.jpg"
                            class="d-block w-100"></a>
                    <div class="carousel-caption d-none d-md-block"> </div>
                </div>

                <div class="carousel-item">
                    <a href="../?cid=51" target="_top"><img
                            src="https://cdn.jsdelivr.net/gh/lietxia/mahjong_pub_src/mfzh/img/banner001.jpg"
                            class="d-block w-100"></a>
                    <div class="carousel-caption d-none d-md-block"></div>
                </div>

                <div class="carousel-item">
                    <img src="https://cdn.jsdelivr.net/gh/lietxia/mahjong_pub_src/mfzh/img/banner003.jpg"
                        class="d-block w-100">
                    <div class="carousel-caption d-none d-md-block"></div>
                </div>
            </div>

            <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>
    <div id="markdowndata"></div>

    <div class="container">
        <br />
        <h4 class="text-light">近期比賽 <span id="running_count" class="badge badge-primary">0</span></h4>

        <table class="table table-striped bg-light">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">賽事名</th>
                    <th scope="col">規則</th>
                    <th scope="col">報名結束時間</th>
                </tr>
            </thead>
            <tbody id="running_cs"></tbody>
        </table>


        <br />
        <h4 class="text-light">往期比賽 <span id="end_count" class="badge badge-secondary">0</span></h4>
        <button type="button" class="btn btn-outline-light"
            onclick="document.getElementById('end_cs_table').setAttribute('class','table table-striped bg-light d-table');this.setAttribute('class','d-none')">查看往期比賽</button>
        <p>
            <table class="table table-striped bg-light d-none" id="end_cs_table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">賽事名</th>
                        <th scope="col">規則</th>
                        <th scope="col">報名結束時間</th>
                    </tr>
                </thead>
                <tbody id="end_cs"></tbody>
            </table>
        </p>
        <div class="border rounded-sm p-2 bg-light">
            <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="pills-friendly_link" data-toggle="pill" href="#friendly_link"
                        role="tab">友情鏈接</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#offlineclub"
                        role="tab">線下立直麻雀群</a>
                </li>
            </ul>
            <div class="tab-content text-center" id="pills-tabContent">
                <div class="tab-pane fade show active" id="friendly_link" role="tabpanel"></div>
                <div class="tab-pane fade" id="offlineclub" role="tabpanel"></div>
            </div>
        </div>
    </div>
    <br />
    <div class="bg-dark text-light text-center">
        所有队名和选手ID禁止涉政、以及敏感词<br />
        明風智和旗下
    </div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@1.1.0/marked.min.js"></script>

    <script src="https://cdn.jsdelivr.net/gh/lietxia/mahjong_pub_src@1.0.13/mfzh/main.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/lietxia/mahjong_pub_src@1.0.13/mfzh/nav.js"></script>

    <script>
        $.getJSON(window.hosturl + "api/data.php?t=cs_list&cid=1", function (data) {

            var friendlylink = [
                ["【麻雀用品网店】牌友之家", "card_fans.png", "https://paiyouzhijia.taobao.com"],
                ["日本麻雀百科", "wiki_lingshangkaihua_com.png", "http://wiki.lingshangkaihua.com"],
                ["Allen's Mahjong Blog", "allen_blog.png", "https://jpmj.nagchan.com"],
                ["天鳳用戶日誌(水表網)", "nodocchi_moe.png", "https://nodocchi.moe"],
                ["日本麻將介紹網站", "jmj_tw.png", "http://jmj.tw"]
            ];

            var qqgrouplink = [
                ["火警立直雀力日進群", 6575294, "https://jq.qq.com/?_wv=1027&k=5SkUGpK"],
                ["長沙線下日麻", 109935221, "https://jq.qq.com/?_wv=1027&k=4AoLHuq"],
                ["长春線下日麻", 195586910, "https://jq.qq.com/?_wv=1027&k=4B4g9ZH"],
                ["北美日麻小站", 299490237, "https://jq.qq.com/?_wv=1027&k=4BHCn9w"],
                ["上海線下日麻", 151747829, "https://jq.qq.com/?_wv=1027&k=4CEIF2Z"],
                ["宁波線下日麻", 144751555, "https://jq.qq.com/?_wv=1027&k=5iHkeca"],
                ["苏州線下日麻", 260025364, "https://jq.qq.com/?_wv=1027&k=5FThhYl"],
                ["廈門線下日麻", 733157756, "https://jq.qq.com/?_wv=1027&k=5pPEyUP"],
                ["深圳線下日麻", 461861930, "https://jq.qq.com/?_wv=1027&k=5vVh2x6"],
                ["泸州線下日麻", 669578617, "https://jq.qq.com/?_wv=1027&k=5Kg09UD"],
                ["南京線下日麻", 872957333, "https://jq.qq.com/?_wv=1027&k=527uO4p"],
                ["昆明線下日麻", 370653876, "https://jq.qq.com/?_wv=1027&k=5DDlv1W"]
            ];
            var end_count = 0, running_count = 0;
            for (var i = 0; i < data.length; i++) {
                var running_cs = document.createElement('tr');
                var end_cs = document.createElement('tr');
                var td0 = cet(['td'], data[i]["cid"])
                var td = document.createElement('td');
                td.appendChild(cet(
                    ['a',
                        'target', '_top',
                        "href", "../?cid=" + data[i]["cid"]
                    ],
                    data[i]["c_name"]
                ))
                var rtype2text = { '1': '四麻', '2': '三麻', }
                if (data[i]["CS_END"] === "1") {
                    end_cs.appendChild(td0);
                    end_cs.appendChild(td);
                    end_cs.appendChild(cet(['td'], rtype2text[data[i]["r_type"]]));
                    end_cs.appendChild(cet(['td'], data[i]["bm_ed"]));
                    document.getElementById('end_cs').appendChild(end_cs);
                    end_count++;
                } else {
                    running_cs.appendChild(td0);
                    running_cs.appendChild(td);
                    running_cs.appendChild(cet(['td'], rtype2text[data[i]["r_type"]]));
                    running_cs.appendChild(cet(['td'], data[i]["bm_ed"]));
                    document.getElementById('running_cs').appendChild(running_cs);
                    running_count++;
                }
            }
            document.getElementById('running_count').innerText = running_count;
            document.getElementById('end_count').innerText = end_count;

            for (var i = 0; i < qqgrouplink.length; i++) {
                var new_a = ce(
                    ['a',
                        'target', '_blank',
                        "class", "index_card",
                        "href", qqgrouplink[i][2]
                    ]);
                var new_img = ce(
                    ['img', "src", "//p.qlogo.cn/gh/" + qqgrouplink[i][1] + '/' + qqgrouplink[i][1] + "/640"]
                );
                new_a.appendChild(new_img);
                new_a.appendChild(cet(['div'], qqgrouplink[i][0]));
                var new_span = document.createElement('span');
                new_a.appendChild(cet(['span'], qqgrouplink[i][1]));

                document.getElementById('offlineclub').appendChild(new_a)
            }

            for (var i = 0; i < friendlylink.length; i++) {
                var new_a = document.createElement("a");
                new_a.setAttribute("target", "_blank");
                new_a.setAttribute("href", friendlylink[i][2]);

                var new_img = document.createElement('img');
                new_img.setAttribute("src", "https://cdn.jsdelivr.net/gh/lietxia/mahjong_pub_src/img/" + friendlylink[i][1]);
                new_img.setAttribute("class", "index_frendlylink");
                new_img.setAttribute("alt", friendlylink[i][0]);
                new_a.appendChild(new_img);
                document.getElementById('friendly_link').appendChild(new_a);
            }

        });
    </script>

</body>


</html>